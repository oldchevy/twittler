<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <script src="moment.js"></script>
    <link rel="stylesheet" type="text/css" href="mainstyles.css">
  </head>
  <body>
    <div class='header'>
      <h1>Your Tweeter Feed</h1>
      <button id='refresh'>Refresh</button>
    </div>
    <div class='all-tweets'>
    </div>
    <script>

      $(document).ready(function(){
        var $body = $('body').find('.all-tweets');
        $body.html('');

        function getNewTweets(){
          while(index < streams.home.length){
            var tweet = streams.home[index];
            var $tweet = $('<div class="one-tweet"></div>');
            var time=moment(tweet.created_at);
            //moment.js date wrapper
            $tweet.text('@' + tweet.user + ': ' + tweet.message + ': '+time.fromNow());
            $tweet.prependTo($body);
            index++;
          }
        }
        
        var index = 0; 
        //Initially populates feed
        getNewTweets();

        //Listening for refresh clicks, and then only adding new ones
        $('#refresh').on('click',function(){
          getNewTweets();
        });

      });

    </script>
  </body>
</html>
